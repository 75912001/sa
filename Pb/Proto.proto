syntax="proto3";

package pb;

option go_package = "saClient/proto";

////////////////////////////////////////////////////////////
// 通用 Common
////////////////////////////////////////////////////////////
// 键值对 key:uint32 value:uint32
message KV {
  uint32 Key = 1;
  uint32 Value = 2;
}

////////////////////////////////////////////////////////////
// 资产 Asset
////////////////////////////////////////////////////////////
// 资产-分段 uint32 AssetID 最大值为: 4294,967295
// 采用分段编码方式, 定义不同类型资产ID范围
// A[1,4293] B[0,999999]

// ⚠️ 实际上 enum 出来的是 int32 所以最大值为: 2147,483647
// A[1,2146] B[0,999999]

// 资产-类型
enum AssetType {
  AssetType_Record = 0; // 记录 [1,1000000]  包含角色, 宠物, 等
  AssetType_Character = 1; // 角色 [1000001,1999999]
  AssetType_Map = 2; // 地图 [2000001,2999999]
  AssetType_Item = 3; // 物品 [3000001,3999999]
  AssetType_Pet = 4; // 宠物 [4000001,4999999]
  AssetType_NPC = 5; // NPC [5000001,5999999]
  AssetType_Decoration = 6; // 装饰物 [6000001,6999999]
  AssetType_Building = 7; // 建筑物 [7000001,7999999]
  AssetType_Plant = 8; // 植物 [8000001,8999999]
  AssetType_Quest = 9; // 任务 [9000001,9999999]
  AssetType_UI = 10; // UI 界面 [10000001,10999999]
}

// 资产-ID-数值范围
enum AssetIDRange {
  AssetIDRange_Unknow = 0; // 未知范围

  AssetIDRange_Record_Start = 1; // 记录-开始
  AssetIDRange_Record_End = 1000000; // 记录-结束

  AssetIDRange_Character_Start = 1000001; // 角色-开始
  AssetIDRange_Character_End = 1999999; // 角色-结束

  AssetIDRange_Map_Start = 2000001; // 地图-开始
  AssetIDRange_Map_End = 2999999; // 地图-结束

  AssetIDRange_Item_Start = 3000001; // 物品-开始
  AssetIDRange_Item_End = 3999999; // 物品-结束

  AssetIDRange_Pet_Start = 4000001; // 宠物-开始
  AssetIDRange_Pet_End = 4999999; // 宠物-结束

  AssetIDRange_NPC_Start = 5000001; // NPC-开始
  AssetIDRange_NPC_End = 5999999; // NPC-结束

  AssetIDRange_Decoration_Start = 6000001; // 装饰物-开始
  AssetIDRange_Decoration_End = 6999999; // 装饰物-结束

  AssetIDRange_Building_Start = 7000001; // 建筑物-开始
  AssetIDRange_Building_End = 7999999; // 建筑物-结束

  AssetIDRange_Plant_Start = 8000001; // 植物-开始
  AssetIDRange_Plant_End = 8999999; // 植物-结束

  AssetIDRange_Quest_Start = 9000001; // 任务-开始
  AssetIDRange_Quest_End = 9999999; // 任务-结束

  AssetIDRange_UI_Start = 10000001; // UI 界面-开始
  AssetIDRange_UI_End = 10999999; // UI 界面-结束
}

// 资产-ID-记录 [1,1000000]
enum AssetIDRecord {
  AssetIDRecord_Unknow = 0; // 未知

  // 通用 [1,1000]
  AssetIDRecord_Exp = 1; // 经验值
  AssetIDRecord_HP = 2; // 生命值
  AssetIDRecord_MP = 3; // 魔法值
  AssetIDRecord_CreateTimestamp = 4; // 创建时间戳
  AssetIDRecord_MapID = 5; // 所在地图ID
  AssetIDRecord_X = 6; // 当前位置x
  AssetIDRecord_Y = 7; // 当前位置y
  AssetIDRecord_Z = 8; // 当前位置z
  AssetIDRecord_Orientation = 10; // 当前朝向
  AssetIDRecord_Pose = 11; // 姿势 CharacterAction
  AssetIDRecord_RebirthCount = 13; // 转生次数 [0, 配置表最大值]

  AssetIDRecord_ElementalEarth = 101; // 元素属性-土
  AssetIDRecord_ElementalWater = 102; // 元素属性-水
  AssetIDRecord_ElementalFire = 103; // 元素属性-火
  AssetIDRecord_ElementalWind = 104; // 元素属性-风

  // 角色 [1001,2000]
  AssetIDRecord_Character_LastLoginTimestamp = 1001; // 上次登录时间戳
  AssetIDRecord_Character_LastLogoutTimestamp = 1002; // 上次登出时间戳
  AssetIDRecord_Character_AvailablePoint = 1003; // 可用点数 - 出生/升级/转生 后获得的可用点数
  AssetIDRecord_Character_AssetID = 1004; // 资产ID

  AssetIDRecord_Character_AttributesStrength = 1101; // 腕力 (1HP, 1攻, 0.1防) [主要提升攻击力，HP 提升较少]
  AssetIDRecord_Character_AttributesEndurance = 1102; // 耐力 (1HP, 0.1攻, 1防) [主要提升防御力，HP 提升较少]
  AssetIDRecord_Character_AttributesAgility = 1103; // 敏捷 (1HP, 1敏捷, 0.05攻, 0.05防) [主要提升敏捷，HP 提升较少]
  AssetIDRecord_Character_AttributesStamina = 1104; // 体力 (4HP, 0.1攻击, 0.1防御) [对 HP 提升最大，是 "血牛" 角色首选]

  // 宠物 [2001,3000]
  AssetIDRecord_Pet_AttributesAttack = 2001; // 宠物属性-攻击
  AssetIDRecord_Pet_AttributesDefense = 2002; // 宠物属性-防御
  AssetIDRecord_Pet_AttributesAgility = 2003; // 宠物属性-敏捷
  AssetIDRecord_Pet_AttributesHP = 2004; // 宠物属性-生命
  AssetIDRecord_Pet_Loyalty = 2005; // 宠物忠诚度 [0,100]

  // 宠物属性-初始属性, 用户计算成长率,预测宠物最终属性
  AssetIDRecord_Pet_AttributesLevel_InitialStats = 2101; // 宠物属性-等级-初始属性
  AssetIDRecord_Pet_AttributesAttack_InitialStats = 2102; // 宠物属性-攻击-初始属性
  AssetIDRecord_Pet_AttributesDefense_InitialStats = 2103; // 宠物属性-防御-初始属性
  AssetIDRecord_Pet_AttributesAgility_InitialStats = 2104; // 宠物属性-敏捷-初始属性
  AssetIDRecord_Pet_AttributesHP_InitialStats = 2105; // 宠物属性-生命-初始属性
}

// 资产-朝向
enum AssetOrientation {
  AssetOrientation_Up = 0; // 上
  AssetOrientation_UpRight = 1; // 右上
  AssetOrientation_Right = 2; // 右
  AssetOrientation_DownRight = 3; // 右下
  AssetOrientation_Down = 4; // 下
  AssetOrientation_DownLeft = 5; // 左下
  AssetOrientation_Left = 6; // 左
  AssetOrientation_UpLeft = 7; // 左上
  AssetOrientation_Max = 8; // 方向最大值
}

////////////////////////////////////////////////////////////
// 记录 Record
////////////////////////////////////////////////////////////
// 记录-主要
message RecordPrimary{
  uint64 PrimaryID = 1; // 记录-主要ID
  map<uint64, RecordSecondary> RecordElementMap= 2; // 记录表 key: 记录-次要ID
}

// 记录-次要
message RecordSecondary{
  uint64 SecondaryID = 1; // 记录-副ID
  int64 timestamp = 2; // 记录-时间戳
  repeated uint64 Data = 3; // 数据-根据记录 PrimaryID/SecondaryID 不同-含义不同
  repeated string StrData = 4; // 记录字符串数据-根据记录 PrimaryID/SecondaryID 不同-含义不同
}

////////////////////////////////////////////////////////////
// 用户 User
////////////////////////////////////////////////////////////
// 用户-记录
message UserRecord {
  map<uint64, CharacterRecord> RoleRecordMap = 10; // 角色记录表 key: 角色UUID
}

////////////////////////////////////////////////////////////
// 角色 Character
////////////////////////////////////////////////////////////
// 角色-等级范围
enum CharacterLevelRange {
  CharacterLevelRange_Unknow = 0; // 未知参数

  CharacterLevelRange_Min = 1; // 最小等级
  CharacterLevelRange_Max = 140; // 最大等级
}

// 角色-动作
enum CharacterActionType {
  CharacterActionType_Sit = 0; // 坐下
  CharacterActionType_Stand = 1; // 站立
  CharacterActionType_Wave = 2; // 挥手
  CharacterActionType_Walk = 3; // 走动
  CharacterActionType_Nod = 4; // 点头
  CharacterActionType_Faint = 5; // 晕倒
  CharacterActionType_Happy = 6; // 高兴
  CharacterActionType_Attack = 7; // 攻击
  CharacterActionType_Angry = 8; // 生气
  CharacterActionType_Defense = 9; // 防御
  CharacterActionType_Sad = 10; // 悲伤
  CharacterActionType_Hurt = 11; // 受伤
  CharacterActionType_Throw = 12; // 投掷
  CharacterActionType_Max = 13; // 动作最大值
}

// 角色-记录
message CharacterRecord {
  uint64 UUID = 1; // 角色UUID 每个用户的角色唯一ID
  string Nick = 2; // 昵称
  map<uint32, uint64> AssetIDRecordMap = 10; // 资产表 key: 资产ID-角色基础 AssetIDRecord value: 数值
  map<uint64, RecordPrimary> RecordMap = 1000; // 记录表 key: 记录-主要ID
  map<uint64, PetRecord> PetRecordMap = 2000; // 宠物记录表 key: 宠物UUID
}

////////////////////////////////////////////////////////////
// 武器 Weapon
////////////////////////////////////////////////////////////
// 武器-类型
enum WeaponType {
  WeaponType_Unarmed = 0; // 赤手空拳
  WeaponType_Dagger = 1; // 匕首
  WeaponType_Sword = 2; // 剑
  WeaponType_GreatSword = 3; // 大剑
  WeaponType_ColossalSword = 4; // 特大剑
//  WeaponType_Axe = 1; // 斧
//  WeaponType_Stick = 2; // 棍
//  WeaponType_Spear = 3; // 枪
//  WeaponType_Claw = 4; // 爪
//  WeaponType_Bow = 5; // 弓
//  WeaponType_Stone = 6; // 石头
//  WeaponType_Boomerang = 7; // 回旋镖
  WeaponType_Max = 5; // 武器类型-最大值
}

////////////////////////////////////////////////////////////
// 宠物 Pet
////////////////////////////////////////////////////////////
// 宠物-动作
enum PetAction {
  PetAction_Unknow = 0; // 未知动作
  PetAction_Idle = 1; // 待机
  PetAction_Stand = 2; // 站立
  PetAction_Move = 3; // 移动
  PetAction_Attack = 4; // 攻击
  PetAction_Hurt = 5; // 受伤
  PetAction_Die = 6; // 死亡
  PetAction_Max = 7; // 动作最大值
}

// 宠物-稀有度
enum PetRarity {
  PetRarity_Unknow = 0; // 未知
  PetRarity_Common = 1; // 普通-白色
  PetRarity_Rare = 2; // 罕见-绿色
  PetRarity_Epic = 3; // 史诗-紫色
  PetRarity_Legendary = 4; // 传说-橙色
  PetRarity_Mythic = 5; // 神话-红色
  PetRarity_Max = 6; // 稀有度最大值
}

// 宠物-品质-可培养
// 平凡-白, 普通-绿, 优秀-紫, 稀有-橙, 极品-红
enum PetGrade {
  PetGrade_Unknow = 0; // 未知
  PetGrade_Common = 1; // 平凡-白色
  PetGrade_Rare = 2; // 普通-绿色
  PetGrade_Epic = 3; // 优秀-紫色
  PetGrade_Legendary = 4; // 稀有-橙色
  PetGrade_Mythic = 5; // 极品-红色
  PetGrade_Max = 6; // 品质最大值
}

// 宠物-记录
message PetRecord {
  uint64 UUID = 1; // 唯一ID 每个角色的宠物唯一ID
  string Nick = 3; // 昵称
  map<uint32, uint64> AssetRecordBaseMap = 10; // 资产表 key: 资产ID-记录基础 AssetIDRBase value: 数值
  map<uint64, RecordPrimary> RecordMap = 1000; // 记录表 key: 记录-主要ID
}

////////////////////////////////////////////////////////////
// 战斗 Combat
////////////////////////////////////////////////////////////
// 战斗-敌人组-敌人数量-范围
enum CombatEnemyGroupEnemyCountRange {
  CombatEnemyGroupEnemyCountRange_Unknow = 0; // 未知参数

  CombatEnemyGroupEnemyCountRange_Min = 1; // 敌人组-敌人数量最小值
  CombatEnemyGroupEnemyCountRange_Max = 10; // 敌人组-敌人数量最大值
}

// 战斗-敌人组-宝宝概率-范围
enum CombatEnemyGroupBabyRate {
  CombatEnemyGroupBabyRate_Min = 0; // 敌人组-宝宝概率最小值
  CombatEnemyGroupBabyRate_Max = 100000; // 敌人组-宝宝概率最大值(十万分率,100000=100%)
}

////////////////////////////////////////////////////////////
// 界面 UI
////////////////////////////////////////////////////////////
// UI状态
enum UIState {
  UIState_Unknow = 0; // 未知状态
  UIState_Closed = 1; // 关闭
  UIState_Opening = 2; // 正在打开
  UIState_Open = 3; // 已打开
  UIState_Closing = 4; // 正在关闭
  UIState_Hidden = 5; // 隐藏
}


// UI消息
enum UIMsg {
  UIMsg_Unknow = 0; // 未知参数

  UIMsg_Click = 10001; // 点击
  UIMsg_Show = 10003; // 显示
  UIMsg_Hide = 10004; // 隐藏
}

enum UIUUID {
  UIUUID_Unknow = 0; // 未知参数

  UIUUID_PopupMenu = 10000001; // 弹出菜单 (- && +)

  UIUUID_ICON_PopupMenu_Expand = 10000002; // 弹出菜单(+)
  UIUUID_ICON_PopupMenu_Collapse = 10000003; // 弹出菜单(-)

  UIUUID_ICON_Bag = 10001001; // 背包
  UIUUID_ICON_Pet = 10001002; // 宠物
  UIUUID_ICON_Quest = 10001003; // 任务
  UIUUID_ICON_Settings = 10001004; // 设置
}