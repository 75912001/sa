# 项目名称:sa
############################################################
# 工具
############################################################
# 使用 Godot Engine v4.5.1.stable.official 引擎开发

# 使用 Blender 制作资源
## v5.0.1

############################################################
# sa 设定
############################################################
# 场景为3D
# 角色为3D
# 资源为3D

# 摄像机设置 (Orthogonal Camera)
## Fixed-Camera 3D
## 摄像机支架.旋转：X轴 -35.3度, Y轴 45度
## 摄像机 projection: Orthogonal

############################################################
# 操作设定-键盘
############################################################
# 主菜单 Esc
# 移动 W/A/S/D
# 跳跃 Space
# 跳跃-方向 Space + 移动方向键
# 翻滚-后撤 Alt(左)
# 翻滚-方向 Alt(左) + 移动方向键
# 蹲下-站起 x
# 切换魔法 方向键-上
# 切换道具 方向键-下
# 切换左手武器 方向键-左
# 切换右手武器 方向键-右
# 使用道具 R
# 调查/互动 E
# 地图 M
# 右手-攻击-轻 鼠标左键
# 右手-攻击-重 鼠标左键 + Shift
# 左手-防御/攻击-轻 鼠标右键
# 左手-战技/攻击-重 鼠标右键 + Shift

############################################################
# 功能
############################################################
# 角色作
## Idle
## Walk
## Run
## Jump
## Roll
## Hurt
## Die
## Attack

## 攻击 todo menglc

## 支持换装 todo menglc

############################################################
# 角色模型, 动作. 
############################################################
# 均来自 Mixamo 免费资源
# 制作流程
## 模型-增加
### 在 Mixamo 网站 下载 角色模型
### 将 Mixamo 下载的 FBX 导入 Blender
### 在 Blender 里检查一下骨骼
### 从 Blender 导出为 .glb 格式放入 Godot
### 生成 res ...

## 动作-增加
### 在 Mixamo 网站 下载 角色动作, fbx
### 双击 *.fbx 在 Godot 中打开, 左侧 Skeleton3D, 右侧 重定向->骨骼映射->BoneMap 再次点击BoneMap, Profile 选择 加载(选择 角色模型.res)
### 保存为 动画资源 .res 文件, 左侧场景标签下,选择 AnimationPlayer->mixamo_com, 右侧保存为文件, 启用, 选择路径保存
### 点击左下角 重新导入

### Player->XBot->AnimationPlayer 下方动画窗口,点击按钮(动画) 进入编辑动画, 将动画加入到库中
### Player->XBot->AnimationTree, 如需要, 加入到状态机中

############################################################
# 调整-武器
############################################################
## 武器-修改-角色手持位置
### 可在对应的(sa\Assets\Equipment\Weapon\Sword.001\data.tres)文件中调整握持位置参数

## 武器-添加新武器
1. 放入模型: `Assets/Equipment/Weapon/${NewWeapon}/scene.gltf`
2. 创建配置: `Assets/Equipment/Weapon/${NewWeapon}/data.tres` (类型: WeaponData [来源 -> sa\Scripts\Weapon\WeaponData.gd])
3. 填写配置参数（包括 `scene_path` 指定使用哪个武器场景）
4. 在 `WeaponMgr._weapon_configs` 添加一行:
   ```gdscript
   3: preload("res://Assets/Equipment/Weapon/${NewWeapon}/data.tres"),
   ```
**同类型武器**（如新的剑）：`scene_path` 填 `res://Scenes/Weapons/Sword.tscn`
**新类型武器**（如斧头）：先创建 `Scenes/Weapons/Axe.tscn`，再在配置中引用

# todo menglc 角色跳跃
## 逻辑判断高度，动画只管姿态
## 动画切分与状态机 (AnimationTree)
### 不要把跳跃看作一个单一的动作，而应将其拆解为三个阶段，利用 AnimationTree 的 StateNode 进行控制：
### Jump_Start (起跳): 角色下蹲蓄力到离开地面的过程。
### Jump_Idle (空中循环): 角色在最高点或下降过程中的姿态。
### Jump_Land (落地): 角色接触地面后的缓冲动作。
### 拆分后，你可以根据物理检测（射线检测 (RayCast3D)）来决定何时触发 Jump_Land。
#### 向上跳 (更高地面): 只要角色的垂直速度 $v_y$ 变为负数（开始下降）且碰撞体接触到地面，就切入 Jump_Land。
#### 向下跳 (更低地面): 角色会保持 Jump_Idle 状态更久，直到射线检测或碰撞体接触到低处地面。




# 动画组合示例表-空手/剑
| 状态   | 左手                | 右手              | 动作   |
|------|-------------------|-----------------|------|
| Idle | 空,短剑,剑(正常)        | 空,短剑,剑(正常)|    |
| Idle | 大剑,特大剑(正常-上翘,胳膊角度不同) | 大剑,特大剑 (扛在肩上)   |  |
| Walk |                   |             |      |
| Run  | WeaponSwitch      | 行走换武器           |      |

右手
空<->短剑 | /剑/大剑/特大剑
->:(左侧)/(左侧)/(左侧)/(左侧)
<-:(左侧)/(左侧)/(背后)/(背后)

左手
空<->短剑 | /剑/大剑/特大剑
->:(右侧)/(右侧)/(右侧)/(右侧)
<-:(右侧)/(右侧)/(背后)/(背后)

换武器: idle, walk, run

