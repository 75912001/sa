[gd_scene load_steps=42 format=3 uid="uid://cltl4miymivys"]

[ext_resource type="PackedScene" uid="uid://bqpd5cm5dcy71" path="res://Assets/Characters/XBot.glb" id="1_mdl7e"]
[ext_resource type="Script" uid="uid://btgkhykbev6d6" path="res://Scripts/Player.gd" id="1_script"]
[ext_resource type="Script" uid="uid://bkp6agvjjm47t" path="res://Scripts/Weapon/WeaponMgr.gd" id="2_52ee3"]
[ext_resource type="Script" uid="uid://cgibjq8orsoge" path="res://Scripts/Input/InputMgr.gd" id="2_m0x7a"]
[ext_resource type="Script" uid="uid://ruoxwj2thpuw" path="res://Scripts/MovementMgr.gd" id="2_megsn"]
[ext_resource type="Animation" uid="uid://cmym1cbyn4tg5" path="res://Assets/Animations/Library/Unarmed/Idle.res" id="2_qu4a1"]
[ext_resource type="Animation" uid="uid://biyh1eubhiecd" path="res://Assets/Animations/Library/Unarmed/Jump.res" id="3_70d11"]
[ext_resource type="Script" uid="uid://hxg50be1t0o6" path="res://Scripts/Animation.gd" id="3_bhhdu"]
[ext_resource type="Animation" uid="uid://dygqhwo1805bn" path="res://Assets/Animations/Library/SwordAndShield/Idle.res" id="3_nn08x"]
[ext_resource type="Animation" uid="uid://e3vujykiovi8" path="res://Assets/Animations/Library/Unarmed/Walking.res" id="4_cw2d6"]
[ext_resource type="Script" uid="uid://bhuu0dvqbcotn" path="res://Scripts/JumpMgr.gd" id="4_yoq75"]
[ext_resource type="Animation" uid="uid://ywb7kg2bg88c" path="res://Assets/Animations/Library/SwordAndShield/Walk.res" id="8_ksbbd"]
[ext_resource type="Animation" uid="uid://bm2d4g8pfoe07" path="res://Assets/Animations/Library/SwordAndShield/DrawSword.res" id="9_miouo"]
[ext_resource type="Animation" uid="uid://dbxxuoc00n3h3" path="res://Assets/Animations/Library/SwordAndShield/SheathSword.1.res" id="10_1e7my"]
[ext_resource type="Animation" uid="uid://25qcudnomvvf" path="res://Assets/Animations/Library/SwordAndShield/SheathSword.2.res" id="11_arntx"]
[ext_resource type="Animation" uid="uid://o4xndrx00au6" path="res://Assets/Animations/Library/Unarmed/DrawSword.res" id="13_o3h8g"]
[ext_resource type="Script" uid="uid://qat0bt2h635k" path="res://Scripts/Weapon/WeaponSwitchMgr.gd" id="14_switch"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_mdl7e"]
radius = 0.4
height = 1.6

[sub_resource type="AnimationLibrary" id="AnimationLibrary_qu4a1"]

[sub_resource type="AnimationLibrary" id="AnimationLibrary_5ixxa"]
_data = {
&"DrawSword": ExtResource("9_miouo"),
&"Idle": ExtResource("3_nn08x"),
&"SheathSword.1": ExtResource("10_1e7my"),
&"SheathSword.2": ExtResource("11_arntx"),
&"Walk": ExtResource("8_ksbbd")
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_nn08x"]
_data = {
&"DrawSword": ExtResource("13_o3h8g"),
&"Idle": ExtResource("2_qu4a1"),
&"Jump": ExtResource("3_70d11"),
&"Walking": ExtResource("4_cw2d6")
}

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_lslt6"]
resource_name = "blend"
filter_enabled = true
filters = ["%GeneralSkeleton:Chest", "%GeneralSkeleton:Head", "%GeneralSkeleton:LeftHand", "%GeneralSkeleton:LeftIndexDistal", "%GeneralSkeleton:LeftIndexIntermediate", "%GeneralSkeleton:LeftIndexProximal", "%GeneralSkeleton:LeftLittleDistal", "%GeneralSkeleton:LeftLittleIntermediate", "%GeneralSkeleton:LeftLittleProximal", "%GeneralSkeleton:LeftLowerArm", "%GeneralSkeleton:LeftMiddleDistal", "%GeneralSkeleton:LeftMiddleIntermediate", "%GeneralSkeleton:LeftMiddleProximal", "%GeneralSkeleton:LeftRingDistal", "%GeneralSkeleton:LeftRingIntermediate", "%GeneralSkeleton:LeftRingProximal", "%GeneralSkeleton:LeftShoulder", "%GeneralSkeleton:LeftThumbDistal", "%GeneralSkeleton:LeftThumbMetacarpal", "%GeneralSkeleton:LeftThumbProximal", "%GeneralSkeleton:LeftUpperArm", "%GeneralSkeleton:Neck", "%GeneralSkeleton:RightHand", "%GeneralSkeleton:RightIndexDistal", "%GeneralSkeleton:RightIndexIntermediate", "%GeneralSkeleton:RightIndexProximal", "%GeneralSkeleton:RightLittleDistal", "%GeneralSkeleton:RightLittleIntermediate", "%GeneralSkeleton:RightLittleProximal", "%GeneralSkeleton:RightLowerArm", "%GeneralSkeleton:RightMiddleDistal", "%GeneralSkeleton:RightMiddleIntermediate", "%GeneralSkeleton:RightMiddleProximal", "%GeneralSkeleton:RightRingDistal", "%GeneralSkeleton:RightRingIntermediate", "%GeneralSkeleton:RightRingProximal", "%GeneralSkeleton:RightShoulder", "%GeneralSkeleton:RightThumbDistal", "%GeneralSkeleton:RightThumbMetacarpal", "%GeneralSkeleton:RightThumbProximal", "%GeneralSkeleton:RightUpperArm", "%GeneralSkeleton:Spine", "%GeneralSkeleton:UpperChest"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lslt6"]
resource_name = "Unarmed_Idle"
animation = &"Unarmed/Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ulo2v"]
resource_name = "Unarmed_Walking"
animation = &"Unarmed/Walking"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5v66d"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_m0x7a"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_1iu4k"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_ulo2v"]
resource_name = "lower_body_sm"
states/End/position = Vector2(1291, 140)
states/Start/position = Vector2(188, 140)
states/Unarmed_Idle/node = SubResource("AnimationNodeAnimation_lslt6")
states/Unarmed_Idle/position = Vector2(431, 140)
states/Unarmed_Walking/node = SubResource("AnimationNodeAnimation_ulo2v")
states/Unarmed_Walking/position = Vector2(745, 140)
transitions = ["Unarmed_Walking", "Unarmed_Idle", SubResource("AnimationNodeStateMachineTransition_5v66d"), "Unarmed_Idle", "Unarmed_Walking", SubResource("AnimationNodeStateMachineTransition_m0x7a"), "Start", "Unarmed_Idle", SubResource("AnimationNodeStateMachineTransition_1iu4k")]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_1iu4k"]
resource_name = "SwordAndShield_Idle"
animation = &"SwordAndShield/Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_m0x7a"]
resource_name = "SwordAndShield_SheathSword_1"
animation = &"SwordAndShield/SheathSword.1"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5v66d"]
resource_name = "SwordAndShield_SheathSword_2"
animation = &"SwordAndShield/SheathSword.2"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_x63xi"]
resource_name = "Unarmed_DrawSword"
animation = &"Unarmed/DrawSword"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_i2e8t"]
resource_name = "Unarmed_Idle"
animation = &"Unarmed/Idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_qidb7"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_70hv0"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_8flut"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_u7x0b"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_utwlt"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_kih0c"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_1iu4k"]
resource_name = "upper_body_sm"
states/End/position = Vector2(1359, 100)
states/SwordAndShield_Idle/node = SubResource("AnimationNodeAnimation_1iu4k")
states/SwordAndShield_Idle/position = Vector2(1018, 100)
states/SwordAndShield_SheathSword_1/node = SubResource("AnimationNodeAnimation_m0x7a")
states/SwordAndShield_SheathSword_1/position = Vector2(1018, 282)
states/SwordAndShield_SheathSword_2/node = SubResource("AnimationNodeAnimation_5v66d")
states/SwordAndShield_SheathSword_2/position = Vector2(461, 277)
states/Unarmed_DrawSword/node = SubResource("AnimationNodeAnimation_x63xi")
states/Unarmed_DrawSword/position = Vector2(744, 100)
states/Unarmed_Idle/node = SubResource("AnimationNodeAnimation_i2e8t")
states/Unarmed_Idle/position = Vector2(461, 100)
transitions = ["Start", "Unarmed_Idle", SubResource("AnimationNodeStateMachineTransition_qidb7"), "Unarmed_Idle", "Unarmed_DrawSword", SubResource("AnimationNodeStateMachineTransition_70hv0"), "Unarmed_DrawSword", "SwordAndShield_Idle", SubResource("AnimationNodeStateMachineTransition_8flut"), "SwordAndShield_Idle", "SwordAndShield_SheathSword_1", SubResource("AnimationNodeStateMachineTransition_u7x0b"), "SwordAndShield_SheathSword_1", "SwordAndShield_SheathSword_2", SubResource("AnimationNodeStateMachineTransition_utwlt"), "SwordAndShield_SheathSword_2", "Unarmed_Idle", SubResource("AnimationNodeStateMachineTransition_kih0c")]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_m0x7a"]
graph_offset = Vector2(-153.23145, -29.297516)
nodes/output/position = Vector2(740, 140)
nodes/lower_body_sm/node = SubResource("AnimationNodeStateMachine_ulo2v")
nodes/lower_body_sm/position = Vector2(180, 100)
nodes/upper_body_sm/node = SubResource("AnimationNodeStateMachine_1iu4k")
nodes/upper_body_sm/position = Vector2(180, 320)
nodes/blend/node = SubResource("AnimationNodeBlend2_lslt6")
nodes/blend/position = Vector2(520, 180)
node_connections = [&"output", 0, &"blend", &"blend", 0, &"lower_body_sm", &"blend", 1, &"upper_body_sm"]

[node name="Player" type="CharacterBody3D" groups=["Player"]]
script = ExtResource("1_script")

[node name="InputMgr" type="Node" parent="."]
script = ExtResource("2_m0x7a")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.8, 0)
shape = SubResource("CapsuleShape3D_mdl7e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]

[node name="AnimationMgr" type="Node" parent="."]
script = ExtResource("3_bhhdu")
animation_tree_path = NodePath("../AnimationTree")

[node name="MovementMgr" type="Node" parent="." node_paths=PackedStringArray("input_mgr")]
script = ExtResource("2_megsn")
input_mgr = NodePath("../InputMgr")

[node name="JumpMgr" type="Node" parent="."]
script = ExtResource("4_yoq75")

[node name="WeaponMgr" type="Node" parent="."]
script = ExtResource("2_52ee3")
weapon_attachment_path = NodePath("../XBot/Skeleton/GeneralSkeleton/RightHandAttachment")

[node name="WeaponSwitchMgr" type="Node" parent="." node_paths=PackedStringArray("input_mgr")]
script = ExtResource("14_switch")
input_mgr = NodePath("../InputMgr")

[node name="XBot" parent="." instance=ExtResource("1_mdl7e")]

[node name="GeneralSkeleton" parent="XBot/Skeleton" index="0"]
bones/0/position = Vector3(-0.0013544201, 1.0284387, 0.01677611)
bones/0/rotation = Quaternion(0.03159278, -0.03344605, -0.0030693628, 0.9989364)
bones/1/rotation = Quaternion(0.0017199843, 0.002957269, -0.0010918118, 0.9999936)
bones/2/rotation = Quaternion(0.00522294, 0.0056384974, -0.0024316737, 0.9999676)
bones/3/rotation = Quaternion(0.0050873617, 0.005590107, -0.0024898911, 0.99996835)
bones/4/rotation = Quaternion(-0.10806087, -0.010459191, 0.025220826, 0.99376935)
bones/5/rotation = Quaternion(0.09058901, 0.02910484, -0.01970017, 0.9952681)
bones/7/rotation = Quaternion(0.46239465, -0.4942479, -0.6202146, -0.39654016)
bones/8/rotation = Quaternion(-0.04594801, 0.8359052, -0.54666495, -0.01757074)
bones/9/rotation = Quaternion(0.04574637, 0.7056255, -0.045746416, 0.7056255)
bones/10/rotation = Quaternion(0.04517929, -0.7696972, 0.053709473, 0.6345395)
bones/11/rotation = Quaternion(-0.18778744, -0.6198684, -0.09329677, 0.75617117)
bones/12/rotation = Quaternion(0.16775377, -0.14987452, -0.008345695, 0.97433394)
bones/13/rotation = Quaternion(0.027119687, -0.14113417, 0.14153233, 0.97944593)
bones/14/scale = Vector3(1.0005782, 1.0004865, 1.0001515)
bones/15/rotation = Quaternion(0.16101241, 0.002305888, 0.027743492, 0.98655975)
bones/16/rotation = Quaternion(0.2495017, 1.1373719e-07, 0.020324958, 0.96816105)
bones/17/rotation = Quaternion(0.13577507, 1.4901159e-08, 0.011060535, 0.990678)
bones/19/rotation = Quaternion(0.18380459, 0.008084148, 0.0085034575, 0.9828928)
bones/20/rotation = Quaternion(0.31446388, 5.960463e-08, 0.025616998, 0.9489237)
bones/21/rotation = Quaternion(0.24440143, 1.4901159e-08, 0.0199095, 0.9694698)
bones/23/rotation = Quaternion(0.32911184, 0.015342537, 0.01927926, 0.9439695)
bones/24/rotation = Quaternion(0.19604531, 7.45058e-08, 0.015970288, 0.9804649)
bones/25/rotation = Quaternion(0.18328653, 1.4901159e-08, 0.014931021, 0.9829462)
bones/27/rotation = Quaternion(0.33637983, 0.021764865, 0.0029014626, 0.9414704)
bones/28/rotation = Quaternion(0.2560248, 8.940695e-08, 0.020856408, 0.96644527)
bones/29/rotation = Quaternion(0.11727366, 4.083091e-08, 0.009553437, 0.9930537)
bones/31/rotation = Quaternion(0.477378, 0.49196243, 0.5973658, -0.41621795)
bones/32/rotation = Quaternion(0.09383407, 0.8352487, -0.53175735, -0.10386902)
bones/33/rotation = Quaternion(0.07927527, -0.7026489, 0.07927527, 0.7026489)
bones/34/rotation = Quaternion(0.063296236, 0.71545243, -0.04308722, 0.6944531)
bones/35/rotation = Quaternion(-0.35921285, 0.6860165, 0.13372931, 0.61843675)
bones/36/rotation = Quaternion(0.23426583, 0.14792763, 0.07190042, 0.95815825)
bones/37/rotation = Quaternion(-0.006323121, 0.04369926, -0.010096163, 0.9989737)
bones/38/scale = Vector3(1.0005782, 1.0004864, 1.0001515)
bones/39/rotation = Quaternion(0.20185661, -0.0043024207, -0.037621696, 0.9786829)
bones/40/rotation = Quaternion(0.27490702, -4.0742472e-07, -0.028171947, 0.961058)
bones/41/rotation = Quaternion(0.16966043, -2.757657e-07, -0.017386502, 0.98534924)
bones/43/rotation = Quaternion(0.21511139, 0.003940395, -0.077137895, 0.9735304)
bones/44/rotation = Quaternion(0.3565235, -4.4703484e-07, -0.03653589, 0.93357176)
bones/45/rotation = Quaternion(0.20131637, -3.4272674e-07, -0.02063045, 0.9793091)
bones/47/rotation = Quaternion(0.29779962, 0.0031693198, -0.07810075, 0.9514229)
bones/48/rotation = Quaternion(0.30552614, -4.61936e-07, -0.031309783, 0.9516688)
bones/49/rotation = Quaternion(0.21300009, -2.682209e-07, -0.021827906, 0.9768083)
bones/51/rotation = Quaternion(0.38393536, -0.014150694, -0.115459956, 0.9160035)
bones/52/rotation = Quaternion(0.24219616, -3.8620925e-07, -0.024819773, 0.9699099)
bones/53/rotation = Quaternion(0.08754003, -1.0430813e-07, -0.008970976, 0.9961207)
bones/55/rotation = Quaternion(-0.08053888, 0.07500322, 0.9920909, 0.060364608)
bones/56/rotation = Quaternion(0.023762798, 0.9986228, -0.044132937, 0.01549675)
bones/57/rotation = Quaternion(0.056375306, 0.70691466, -0.70229244, -0.062279876)
bones/58/rotation = Quaternion(4.613773e-05, 0.9999916, -0.002382242, -0.0033463973)
bones/60/rotation = Quaternion(0.11518325, 0.06993602, 0.9881042, -0.07410726)
bones/61/rotation = Quaternion(-0.022384958, 0.9966144, -0.06663921, 0.04263876)
bones/62/rotation = Quaternion(-0.056187477, 0.69535667, -0.71373147, 0.06252646)
bones/63/rotation = Quaternion(-2.636854e-05, 0.9999899, -0.002251685, 0.0039076097)

[node name="RightHandAttachment" type="BoneAttachment3D" parent="XBot/Skeleton/GeneralSkeleton" index="2"]
transform = Transform3D(0.45957184, -0.046342716, 0.88693076, 0.053225093, -0.99540585, -0.07958978, 0.8865444, 0.08378421, -0.4549938, -0.25259563, 0.8630369, 0.041442506)
bone_name = "RightHand"
bone_idx = 10

[node name="AnimationPlayer" parent="XBot" index="1"]
libraries = {
&"": SubResource("AnimationLibrary_qu4a1"),
&"SwordAndShield": SubResource("AnimationLibrary_5ixxa"),
&"Unarmed": SubResource("AnimationLibrary_nn08x")
}

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../XBot")
tree_root = SubResource("AnimationNodeBlendTree_m0x7a")
anim_player = NodePath("../XBot/AnimationPlayer")
parameters/blend/blend_amount = 0.0

[editable path="XBot"]
